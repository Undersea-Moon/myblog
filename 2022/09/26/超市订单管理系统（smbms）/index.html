<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.7.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.7.0" type="image/png" sizes="32x32"><meta property="og:type" content="article">
<meta property="og:title" content="超市订单管理系统（smbms）">
<meta property="og:url" content="https://www.yanggroup.cn/2022/09/26/%E8%B6%85%E5%B8%82%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88smbms%EF%BC%89/index.html">
<meta property="og:site_name" content="YangGroup">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-09-26T09:59:20.165Z">
<meta property="article:modified_time" content="2022-09-26T14:24:57.637Z">
<meta property="article:author" content="小宇">
<meta name="twitter:card" content="summary"><title>超市订单管理系统（smbms） | YangGroup</title><link ref="canonical" href="https://www.yanggroup.cn/2022/09/26/%E8%B6%85%E5%B8%82%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88smbms%EF%BC%89/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.7.0"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">YangGroup</div><div class="header-banner-info__subtitle"></div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">超市订单管理系统（smbms）</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-09-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-09-26</span></span></div></header><div class="post-body">
        <h1 id="超市订单管理系统（smbms）"   >
          <a href="#超市订单管理系统（smbms）" class="heading-link"><i class="fas fa-link"></i></a><a href="#超市订单管理系统（smbms）" class="headerlink" title="超市订单管理系统（smbms）"></a><span id="more"></span>超市订单管理系统（smbms）</h1>
      
        <h1 id="8-13来自劳姐的赞助"   >
          <a href="#8-13来自劳姐的赞助" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-13来自劳姐的赞助" class="headerlink" title="8-13来自劳姐的赞助"></a>8-13<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://gitee.com/laohuiya" >来自劳姐的赞助</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></h1>
      
        <h3 id="1、创建前后端项目"   >
          <a href="#1、创建前后端项目" class="heading-link"><i class="fas fa-link"></i></a><a href="#1、创建前后端项目" class="headerlink" title="1、创建前后端项目"></a>1、创建前后端项目</h3>
      
        <h4 id="1-1-前端vue脚手架-未完成"   >
          <a href="#1-1-前端vue脚手架-未完成" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-1-前端vue脚手架-未完成" class="headerlink" title="1.1 前端vue脚手架 (未完成)"></a>1.1 前端vue脚手架 (未完成)</h4>
      
        <h4 id="1-2-后端webapp项目：servlet-myBatis"   >
          <a href="#1-2-后端webapp项目：servlet-myBatis" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-2-后端webapp项目：servlet-myBatis" class="headerlink" title="1.2 后端webapp项目：servlet+myBatis"></a>1.2 后端webapp项目：servlet+myBatis</h4>
      
        <h5 id="1-2-1-pom-xml中引入依赖"   >
          <a href="#1-2-1-pom-xml中引入依赖" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-2-1-pom-xml中引入依赖" class="headerlink" title="1.2.1 pom.xml中引入依赖"></a>1.2.1 pom.xml中引入依赖</h5>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--SpringIoC依赖--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">5.3</span><span class="number">.21</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--MySQL依赖--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">8.0</span><span class="number">.29</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--MyBatis的依赖--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">3.5</span><span class="number">.10</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--小辣椒的依赖--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">1.18</span><span class="number">.24</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--fastjson依赖--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">2.0</span><span class="number">.10</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--pagehelper 分页插件--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">5.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br></pre></td></tr></table></div></figure>



<p>​		</p>

        <h5 id="1-2-2-resources资源包中导入资源"   >
          <a href="#1-2-2-resources资源包中导入资源" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-2-2-resources资源包中导入资源" class="headerlink" title="1.2.2 resources资源包中导入资源"></a>1.2.2 resources资源包中导入资源</h5>
      <p>config.xml  （后面注解的方式就只留下分页插件拦截器）</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!--给属性赋值（帐号密码）--&gt;</span><br><span class="line">    &lt;properties resource=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    &lt;!--当前配置文件的设置--&gt;</span><br><span class="line">    &lt;settings&gt;</span><br><span class="line">        &lt;!--输出日志到控制台中--&gt;</span><br><span class="line">        &lt;setting name=<span class="string">&quot;logImpl&quot;</span> value=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span><br><span class="line">        &lt;!--开启二级缓存--&gt;</span><br><span class="line">        &lt;setting name=<span class="string">&quot;cacheEnabled&quot;</span> value=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">    &lt;/settings&gt;</span><br><span class="line">    &lt;!--分页插件拦截器--&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin interceptor=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><br><span class="line">            &lt;!--reasonable：分页合理化参数，默认值为<span class="literal">false</span>。</span><br><span class="line">                  当该参数设置为 <span class="literal">true</span> 时，pageNum&lt;=<span class="number">0</span> 时会查询第一页，</span><br><span class="line">                  pageNum&gt;pages（超过总数时），会查询最后一页。</span><br><span class="line">                  默认<span class="literal">false</span> 时，直接根据参数进行查询。--&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;reasonable&quot;</span> value=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">    &lt;environments <span class="keyword">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span><br><span class="line">        &lt;environment id=<span class="string">&quot;development&quot;</span>&gt;</span><br><span class="line">            &lt;transactionManager type=<span class="string">&quot;JDBC&quot;</span>/&gt;</span><br><span class="line">            &lt;!--分别书写驱动类、网址、账号和密码 注意网址中&amp;使用&amp;amp;代替--&gt;</span><br><span class="line">            &lt;dataSource type=<span class="string">&quot;POOLED&quot;</span>&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;driver&quot;</span> value=<span class="string">&quot;$&#123;driverClassName&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line"></span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;!--   注册的简写     --&gt;</span><br><span class="line">        &lt;!--引入的资源文件--&gt;</span><br><span class="line">        &lt;<span class="keyword">package</span> name=<span class="string">&quot;mapper&quot;</span>/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></div></figure>

<p>jdbc.properties  （后面使用springMVC的方式就不需要这个包了）</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/mysql_text_first</span></span><br><span class="line">driverClassName=com.mysql.cj.jdbc.Driver</span><br><span class="line">password=<span class="number">1234</span></span><br></pre></td></tr></table></div></figure>



<p>applicationContext.xml   (后面使用注解的方式就不需要这个包了)</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--(SpringIOC) <span class="keyword">new</span>对象的区域--&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></div></figure>






        <h3 id="2、构建数据库"   >
          <a href="#2、构建数据库" class="heading-link"><i class="fas fa-link"></i></a><a href="#2、构建数据库" class="headerlink" title="2、构建数据库"></a>2、构建数据库</h3>
      <p>​	所需要的表+录入数据：</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database smbms;</span><br><span class="line">use smbms;</span><br><span class="line"># <span class="number">7</span>、订单表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">order</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `orderCode` <span class="type">varchar</span>(<span class="number">15</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;订单编号&#x27;</span>,</span><br><span class="line">  `goodId` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品id外键&#x27;</span>,</span><br><span class="line">  `isPay` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;支付状态（1：支付；0：未支付）&#x27;</span>,</span><br><span class="line">  `userId` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户id外键&#x27;</span>,</span><br><span class="line">  `orderDatetime` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;订购时间&#x27;</span>,</span><br><span class="line">  `orderNumber` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;订单数量&#x27;</span>,</span><br><span class="line">  `state` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">1</span> COMMENT <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">foreign</span> key (goodId) <span class="keyword">references</span> good(id),</span><br><span class="line">  <span class="keyword">foreign</span> key (userId) <span class="keyword">references</span> <span class="keyword">user</span>(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># <span class="number">6</span>、商品</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `good` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `goodName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品名称&#x27;</span>,</span><br><span class="line">  `goodUnit` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品单位&#x27;</span>,</span><br><span class="line">  `goodCount` <span class="type">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品数量&#x27;</span>,</span><br><span class="line">  `totalPrice` <span class="type">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品总额&#x27;</span>,</span><br><span class="line">  `providerId` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;供应商ID外键&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">foreign</span> key (providerId) <span class="keyword">references</span> provider(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># <span class="number">5</span>、供应商</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `provider` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `providerName` <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;供应商名称&#x27;</span>,</span><br><span class="line">  `providerContact` <span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;供应商联系人&#x27;</span>,</span><br><span class="line">  `providerPhone` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;联系电话&#x27;</span>,</span><br><span class="line">  `providerAddress` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">  `providerFax` <span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;传真&#x27;</span>,</span><br><span class="line">  `creationDate` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `state` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="number">1</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#<span class="number">1</span>、角色</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `role` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `roleName` <span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;角色名称&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line">#<span class="number">2</span>权限表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `power`(</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> AUTO_INCREMENT comment <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `powerName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">null</span> comment <span class="string">&#x27;权限名称&#x27;</span>,</span><br><span class="line">  `powerUrl` <span class="type">varchar</span>(<span class="number">2000</span>) <span class="keyword">default</span> <span class="keyword">null</span> comment <span class="string">&#x27;权限url&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line">#<span class="number">4</span>用户和权限关联表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `user_power`(</span><br><span class="line">  `userId` <span class="type">int</span>(<span class="number">20</span>) comment <span class="string">&#x27;外键用户id&#x27;</span> ,</span><br><span class="line">  `powerId` <span class="type">int</span>(<span class="number">20</span>) comment <span class="string">&#x27;外键权限id&#x27;</span>,</span><br><span class="line">  <span class="keyword">foreign</span> key (userId) <span class="keyword">references</span> <span class="keyword">user</span>(id),</span><br><span class="line">  <span class="keyword">foreign</span> key (powerId) <span class="keyword">references</span> <span class="built_in">power</span>(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、用户</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `userCode` <span class="type">varchar</span>(<span class="number">20</span>)   <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户编码&#x27;</span>,</span><br><span class="line">  `Password` <span class="type">varchar</span>(<span class="number">15</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户密码&#x27;</span>,</span><br><span class="line">  `nickName` <span class="type">varchar</span>(<span class="number">15</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户昵称&#x27;</span>,</span><br><span class="line">  `userSex` <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">  `birthday` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">15</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机&#x27;</span>,</span><br><span class="line">  `roleId` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户角色（取自角色表-角色id）&#x27;</span>,</span><br><span class="line">   `state` <span class="type">int</span>(<span class="number">1</span>)  <span class="keyword">DEFAULT</span> <span class="number">1</span> COMMENT <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">   <span class="keyword">foreign</span> key (roleId) <span class="keyword">references</span> role(id)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>



<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database smbms;</span><br><span class="line">use smbms;</span><br><span class="line"># <span class="number">7</span>、订单表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">order</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `orderCode` <span class="type">varchar</span>(<span class="number">15</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;订单编号&#x27;</span>,</span><br><span class="line">  `goodId` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品id外键&#x27;</span>,</span><br><span class="line">  `isPay` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;支付状态（1：支付；0：未支付）&#x27;</span>,</span><br><span class="line">  `userId` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户id外键&#x27;</span>,</span><br><span class="line">  `orderDatetime` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;订购时间&#x27;</span>,</span><br><span class="line">  `orderNumber` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;订单数量&#x27;</span>,</span><br><span class="line">  `state` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">1</span> COMMENT <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">foreign</span> key (goodId) <span class="keyword">references</span> good(id),</span><br><span class="line">  <span class="keyword">foreign</span> key (userId) <span class="keyword">references</span> <span class="keyword">user</span>(id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `<span class="keyword">order</span>`(`orderCode`,`goodId`,`isPay`,`userId`,`orderDatetime`,`orderNumber`)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;G123456&#x27;</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,now(),<span class="number">100</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>,now(),<span class="number">10</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,now(),<span class="number">10</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">4</span>,now(),<span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">5</span>,now(),<span class="number">400</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">6</span>,now(),<span class="number">57</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">7</span>,now(),<span class="number">34</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">17</span>,<span class="number">1</span>,<span class="number">8</span>,now(),<span class="number">23</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">16</span>,<span class="number">0</span>,<span class="number">9</span>,now(),<span class="number">11</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">10</span>,now(),<span class="number">100</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">11</span>,now(),<span class="number">26</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">12</span>,now(),<span class="number">22</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,now(),<span class="number">77</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">11</span>,<span class="number">0</span>,<span class="number">3</span>,now(),<span class="number">88</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">4</span>,now(),<span class="number">45</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">13</span>,<span class="number">0</span>,<span class="number">7</span>,now(),<span class="number">90</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">9</span>,now(),<span class="number">600</span>),</span><br><span class="line">       (<span class="string">&#x27;G123456&#x27;</span>,<span class="number">14</span>,<span class="number">0</span>,<span class="number">10</span>,now(),<span class="number">245</span>);</span><br><span class="line"></span><br><span class="line"># <span class="number">6</span>、商品</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `good` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `goodName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品名称&#x27;</span>,</span><br><span class="line">  `goodUnit` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品单位&#x27;</span>,</span><br><span class="line">  `goodCount` <span class="type">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品数量&#x27;</span>,</span><br><span class="line">  `totalPrice` <span class="type">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品总额&#x27;</span>,</span><br><span class="line">  `providerId` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;供应商ID外键&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">foreign</span> key (providerId) <span class="keyword">references</span> provider(id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `good`( `goodName`, `goodUnit`, `goodCount`, `totalPrice`, `providerId`)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;香皂、肥皂、药皂&#x27;</span>, <span class="string">&#x27;块&#x27;</span>, <span class="string">&#x27;1000.00&#x27;</span>, <span class="string">&#x27;10000.00&#x27;</span>,<span class="number">13</span>),</span><br><span class="line">       (<span class="string">&#x27;大豆油&#x27;</span>,<span class="string">&#x27;斤&#x27;</span>, <span class="string">&#x27;300.00&#x27;</span>, <span class="string">&#x27;5890.00&#x27;</span>, <span class="number">6</span>),</span><br><span class="line">       (<span class="string">&#x27;橄榄油&#x27;</span>,<span class="string">&#x27;斤&#x27;</span>, <span class="string">&#x27;200.00&#x27;</span>, <span class="string">&#x27;9800.00&#x27;</span>, <span class="number">7</span>),</span><br><span class="line">       (<span class="string">&#x27;洗洁精&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;500.00&#x27;</span>, <span class="string">&#x27;7000.00&#x27;</span>, <span class="number">9</span>),</span><br><span class="line">       (<span class="string">&#x27;美国大杏仁&#x27;</span>, <span class="string">&#x27;袋&#x27;</span>, <span class="string">&#x27;300.00&#x27;</span>, <span class="string">&#x27;5000.00&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">       (<span class="string">&#x27;沐浴液、精油&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;500.00&#x27;</span>, <span class="string">&#x27;23000.00&#x27;</span>,<span class="number">14</span>),</span><br><span class="line">       (<span class="string">&#x27;不锈钢盘碗&#x27;</span>, <span class="string">&#x27;个&#x27;</span>, <span class="string">&#x27;600.00&#x27;</span>, <span class="string">&#x27;6000.00&#x27;</span>, <span class="number">14</span>),</span><br><span class="line">       (<span class="string">&#x27;塑料杯&#x27;</span>, <span class="string">&#x27;个&#x27;</span>, <span class="string">&#x27;350.00&#x27;</span>, <span class="string">&#x27;1750.00&#x27;</span>,<span class="number">14</span>),</span><br><span class="line">       ( <span class="string">&#x27;豆瓣酱&#x27;</span>,<span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;200.00&#x27;</span>, <span class="string">&#x27;2000.00&#x27;</span>, <span class="number">8</span>),</span><br><span class="line">       ( <span class="string">&#x27;海之蓝&#x27;</span>,<span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;50.00&#x27;</span>, <span class="string">&#x27;10000.00&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       ( <span class="string">&#x27;芝华士&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;20.00&#x27;</span>, <span class="string">&#x27;6000.00&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       ( <span class="string">&#x27;长城红葡萄酒&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;60.00&#x27;</span>, <span class="string">&#x27;800.00&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       ( <span class="string">&#x27;泰国香米&#x27;</span>,<span class="string">&#x27;斤&#x27;</span>, <span class="string">&#x27;400.00&#x27;</span>, <span class="string">&#x27;5000.00&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;东北大米&#x27;</span>, <span class="string">&#x27;斤&#x27;</span>, <span class="string">&#x27;600.00&#x27;</span>, <span class="string">&#x27;4000.00&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;可口可乐&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;2000.00&#x27;</span>, <span class="string">&#x27;6000.00&#x27;</span>, <span class="number">2</span>),</span><br><span class="line">       ( <span class="string">&#x27;脉动&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;1500.00&#x27;</span>, <span class="string">&#x27;4500.00&#x27;</span>,  <span class="number">2</span>),</span><br><span class="line">       ( <span class="string">&#x27;哇哈哈&#x27;</span>, <span class="string">&#x27;瓶&#x27;</span>, <span class="string">&#x27;2000.00&#x27;</span>, <span class="string">&#x27;4000.00&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">5</span>、供应商</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `provider` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `providerName` <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;供应商名称&#x27;</span>,</span><br><span class="line">  `providerContact` <span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;供应商联系人&#x27;</span>,</span><br><span class="line">  `providerPhone` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;联系电话&#x27;</span>,</span><br><span class="line">  `providerAddress` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">  `providerFax` <span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;传真&#x27;</span>,</span><br><span class="line">  `creationDate` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `state` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="number">1</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `provider`(`providerName`, `providerContact`, `providerPhone`, `providerAddress`, `providerFax`)</span><br><span class="line"><span class="keyword">values</span> ( <span class="string">&#x27;北京三木堂商贸有限公司&#x27;</span>, <span class="string">&#x27;张国强&#x27;</span>, <span class="string">&#x27;13566667777&#x27;</span>, <span class="string">&#x27;北京市丰台区育芳园北路&#x27;</span>, <span class="string">&#x27;010-58858787&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;石家庄帅益食品贸易有限公司&#x27;</span>,<span class="string">&#x27;王军&#x27;</span>, <span class="string">&#x27;13309094212&#x27;</span>, <span class="string">&#x27;河北省石家庄新华区&#x27;</span>,<span class="string">&#x27;0311-67738876&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;深圳市泰香米业有限公司&#x27;</span>,<span class="string">&#x27;郑程瀚&#x27;</span>, <span class="string">&#x27;13402013312&#x27;</span>, <span class="string">&#x27;广东省深圳市福田区深南大道6006华丰大厦&#x27;</span>, <span class="string">&#x27;0755-67776212&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;深圳市喜来客商贸有限公司&#x27;</span>, <span class="string">&#x27;林妮&#x27;</span>, <span class="string">&#x27;18599897645&#x27;</span>,<span class="string">&#x27;广东省深圳市福龙工业区B2栋3楼西&#x27;</span>, <span class="string">&#x27;0755-67772341&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;兴化佳美调味品厂&#x27;</span>,  <span class="string">&#x27;徐国洋&#x27;</span>, <span class="string">&#x27;13754444221&#x27;</span>, <span class="string">&#x27;江苏省兴化市林湖工业区&#x27;</span>, <span class="string">&#x27;0523-21299098&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;北京纳福尔食用油有限公司&#x27;</span>,  <span class="string">&#x27;马莺&#x27;</span>, <span class="string">&#x27;13422235678&#x27;</span>, <span class="string">&#x27;北京市朝阳区珠江帝景1号楼&#x27;</span>,<span class="string">&#x27;010-588634233&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;北京国粮食用油有限公司&#x27;</span>, <span class="string">&#x27;王驰&#x27;</span>, <span class="string">&#x27;13344441135&#x27;</span>, <span class="string">&#x27;北京大兴青云店开发区&#x27;</span>, <span class="string">&#x27;010-588134111&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;慈溪市广和绿色食品厂&#x27;</span>,  <span class="string">&#x27;薛圣丹&#x27;</span>, <span class="string">&#x27;18099953223&#x27;</span>, <span class="string">&#x27;浙江省宁波市慈溪周巷小安村&#x27;</span>,<span class="string">&#x27;0574-34449090&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;优百商贸有限公司&#x27;</span>,  <span class="string">&#x27;李立国&#x27;</span>, <span class="string">&#x27;13323566543&#x27;</span>, <span class="string">&#x27;广西南宁市秀厢大道42-1号&#x27;</span>, <span class="string">&#x27;0771-98861134&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;南京火头军信息技术有限公司&#x27;</span>,  <span class="string">&#x27;陈女士&#x27;</span>, <span class="string">&#x27;13098992113&#x27;</span>, <span class="string">&#x27;江苏省南京市浦口区浦口大道1号新城总部大厦A座903室&#x27;</span>,<span class="string">&#x27;025-86223345&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;广州市白云区美星五金制品厂&#x27;</span>, <span class="string">&#x27;梁天&#x27;</span>, <span class="string">&#x27;13562276775&#x27;</span>, <span class="string">&#x27;广州市白云区钟落潭镇福龙路20号&#x27;</span>, <span class="string">&#x27;020-85542231&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;北京隆盛日化科技&#x27;</span>,  <span class="string">&#x27;孙欣&#x27;</span>, <span class="string">&#x27;13689865678&#x27;</span>, <span class="string">&#x27;北京市大兴区旧宫&#x27;</span>,<span class="string">&#x27;010-35576786&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;山东豪克华光联合发展有限公司&#x27;</span>, <span class="string">&#x27;吴洪转&#x27;</span>, <span class="string">&#x27;13245468787&#x27;</span>,<span class="string">&#x27;山东济阳济北工业区仁和街21号&#x27;</span>, <span class="string">&#x27;0531-53362445&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;无锡喜源坤商行&#x27;</span>,  <span class="string">&#x27;周一清&#x27;</span>, <span class="string">&#x27;18567674532&#x27;</span>, <span class="string">&#x27;江苏无锡盛岸西路&#x27;</span>, <span class="string">&#x27;0510-32274422&#x27;</span>),</span><br><span class="line">       ( <span class="string">&#x27;乐摆日用品厂&#x27;</span>,  <span class="string">&#x27;王世杰&#x27;</span>, <span class="string">&#x27;13212331567&#x27;</span>,<span class="string">&#x27;浙江省金华市义乌市义东路&#x27;</span>, <span class="string">&#x27;0579-34452321&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">1</span>、角色</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `role` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `roleName` <span class="type">varchar</span>(<span class="number">20</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;角色名称&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `role`(`id`, `roleName`)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">1</span>, <span class="string">&#x27;系统管理员&#x27;</span>),</span><br><span class="line">       (<span class="number">2</span>, <span class="string">&#x27;经理&#x27;</span>),</span><br><span class="line">       (<span class="number">3</span>, <span class="string">&#x27;普通员工&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>权限表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `power`(</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> AUTO_INCREMENT comment <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `powerName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">null</span> comment <span class="string">&#x27;权限名称&#x27;</span>,</span><br><span class="line">  `powerUrl` <span class="type">varchar</span>(<span class="number">2000</span>) <span class="keyword">default</span> <span class="keyword">null</span> comment <span class="string">&#x27;权限url&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#<span class="number">4</span>用户和权限关联表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `user_power`(</span><br><span class="line">  `userId` <span class="type">int</span>(<span class="number">20</span>) comment <span class="string">&#x27;外键用户id&#x27;</span> ,</span><br><span class="line">  `powerId` <span class="type">int</span>(<span class="number">20</span>) comment <span class="string">&#x27;外键权限id&#x27;</span>,</span><br><span class="line">  <span class="keyword">foreign</span> key (userId) <span class="keyword">references</span> <span class="keyword">user</span>(id),</span><br><span class="line">  <span class="keyword">foreign</span> key (powerId) <span class="keyword">references</span> <span class="built_in">power</span>(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、用户</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `userCode` <span class="type">varchar</span>(<span class="number">20</span>)   <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户编码&#x27;</span>,</span><br><span class="line">  `nickName` <span class="type">varchar</span>(<span class="number">15</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户昵称&#x27;</span>,</span><br><span class="line">  `Password` <span class="type">varchar</span>(<span class="number">15</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户密码&#x27;</span>,</span><br><span class="line">  `userSex` <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别(1:女、 2:男）&#x27;</span>,</span><br><span class="line">  `birthday` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">15</span>)  <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机&#x27;</span>,</span><br><span class="line">  `roleId` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户角色（取自角色表-角色id）&#x27;</span>,</span><br><span class="line">   `state` <span class="type">int</span>(<span class="number">1</span>)  <span class="keyword">DEFAULT</span> <span class="number">1</span> COMMENT <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">   <span class="keyword">foreign</span> key (roleId) <span class="keyword">references</span> role(id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `<span class="keyword">user</span>`(`userCode`,  `nickName`, `Password`,`userSex`, `birthday`, `phone`, `roleId`)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;系统管理员&#x27;</span>, <span class="string">&#x27;1234567&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1983-10-10&#x27;</span>, <span class="string">&#x27;13688889999&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="string">&#x27;liming&#x27;</span>, <span class="string">&#x27;李明&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1983-12-10&#x27;</span>, <span class="string">&#x27;13688884457&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;hanlubiao&#x27;</span>, <span class="string">&#x27;韩路彪&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1984-06-05&#x27;</span>, <span class="string">&#x27;18567542321&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;zhanghua&#x27;</span>, <span class="string">&#x27;张华&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1983-06-15&#x27;</span>, <span class="string">&#x27;13544561111&#x27;</span>,  <span class="number">3</span>),</span><br><span class="line">       (<span class="string">&#x27;wangyang&#x27;</span>, <span class="string">&#x27;王洋&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1982-12-31&#x27;</span>, <span class="string">&#x27;13444561124&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="string">&#x27;zhaoyan&#x27;</span>, <span class="string">&#x27;赵燕&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1986-03-07&#x27;</span>, <span class="string">&#x27;18098764545&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;sunlei&#x27;</span>, <span class="string">&#x27;孙磊&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1981-01-04&#x27;</span>, <span class="string">&#x27;13387676765&#x27;</span>,  <span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;sunxing&#x27;</span>, <span class="string">&#x27;孙兴&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1978-03-12&#x27;</span>, <span class="string">&#x27;13367890900&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;zhangchen&#x27;</span>, <span class="string">&#x27;张晨&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1986-03-28&#x27;</span>, <span class="string">&#x27;18098765434&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;dengchao&#x27;</span>, <span class="string">&#x27;邓超&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1981-11-04&#x27;</span>, <span class="string">&#x27;13689674534&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;yangguo&#x27;</span>, <span class="string">&#x27;杨过&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;1980-01-01&#x27;</span>, <span class="string">&#x27;13388886623&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       ( <span class="string">&#x27;zhaomin&#x27;</span>, <span class="string">&#x27;赵敏&#x27;</span>, <span class="string">&#x27;0000000&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1987-12-04&#x27;</span>, <span class="string">&#x27;18099897657&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="3、写bean包"   >
          <a href="#3、写bean包" class="heading-link"><i class="fas fa-link"></i></a><a href="#3、写bean包" class="headerlink" title="3、写bean包"></a>3、写bean包</h3>
      
        <h1 id="8-18"   >
          <a href="#8-18" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-18" class="headerlink" title="8-18"></a>8-18</h1>
      
        <h2 id="实现登录"   >
          <a href="#实现登录" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现登录" class="headerlink" title="实现登录"></a>实现登录</h2>
      <p>纯注解+springMVC的方式</p>

        <h3 id="一、后端"   >
          <a href="#一、后端" class="heading-link"><i class="fas fa-link"></i></a><a href="#一、后端" class="headerlink" title="一、后端"></a>一、后端</h3>
      
        <h5 id="①引入依赖："   >
          <a href="#①引入依赖：" class="heading-link"><i class="fas fa-link"></i></a><a href="#①引入依赖：" class="headerlink" title="①引入依赖："></a>①引入依赖：</h5>
      <figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring-webMVC</span><br><span class="line">spring-jdbc</span><br><span class="line">mybatis-spring</span><br><span class="line">druid </span><br><span class="line">servlet</span><br></pre></td></tr></table></div></figure>


        <h5 id="②bean包"   >
          <a href="#②bean包" class="heading-link"><i class="fas fa-link"></i></a><a href="#②bean包" class="headerlink" title="②bean包"></a>②bean包</h5>
      
        <h6 id="User"   >
          <a href="#User" class="heading-link"><i class="fas fa-link"></i></a><a href="#User" class="headerlink" title="User"></a>User</h6>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line">  <span class="keyword">private</span> String userCode;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="keyword">private</span> String nickName;</span><br><span class="line">  <span class="keyword">private</span> String userSex;</span><br><span class="line">  <span class="keyword">private</span> String birthday;</span><br><span class="line">  <span class="keyword">private</span> String phone;</span><br><span class="line">  <span class="keyword">private</span> Integer roleId;</span><br><span class="line">  <span class="keyword">private</span> Integer state;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="Resultcode"   >
          <a href="#Resultcode" class="heading-link"><i class="fas fa-link"></i></a><a href="#Resultcode" class="headerlink" title="Resultcode"></a>Resultcode</h6>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultCode</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//统一返回结果形式</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  String code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h5 id="③配置文件"   >
          <a href="#③配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#③配置文件" class="headerlink" title="③配置文件"></a>③配置文件</h5>
      
        <h6 id="SpringConfig"   >
          <a href="#SpringConfig" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringConfig" class="headerlink" title="SpringConfig"></a>SpringConfig</h6>
      <p>扫包 : 注解的方式扫mapper 包和service包</p>
<p>druid(数据库连接池)</p>
<p>会话工厂</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.ClassPathResource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.Resource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.laohuiya.java.project.smbms.service&quot;)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.laohuiya.java.project.smbms.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*用druid连接数据库*/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    DataSource <span class="title function_">getDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/smbms&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;1234&quot;</span>);</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*创建会话工厂*/</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    SqlSessionFactoryBean <span class="title function_">getSqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        ssf.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">//加载config.xml包</span></span><br><span class="line">        <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;config.xml&quot;</span>);</span><br><span class="line">        ssf.setConfigLocation(resource);</span><br><span class="line">        <span class="keyword">return</span> ssf;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="SpringMVCConfig"   >
          <a href="#SpringMVCConfig" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringMVCConfig" class="headerlink" title="SpringMVCConfig"></a>SpringMVCConfig</h6>
      <p>实现接口 WebMvcConfigurer </p>
<p>重写configureDefaultServletHandling方法允许资源访问</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.laohuiya.java.project.smbms.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMVCConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*允许静态资源访问 </span></span><br><span class="line"><span class="comment">     @EnableWebMvc注解的作用：用于需要使用自定义springmvc配置项目的场景*/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="InitConfig"   >
          <a href="#InitConfig" class="heading-link"><i class="fas fa-link"></i></a><a href="#InitConfig" class="headerlink" title="InitConfig"></a>InitConfig</h6>
      <p>继承AbstractAnnotationConfigDispatcherServletInitializer类</p>
<p> 重写三个方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类似于web.xml</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载配置</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载servlet</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringMVCConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//对哪些请求拦截</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h5 id="④"   >
          <a href="#④" class="heading-link"><i class="fas fa-link"></i></a><a href="#④" class="headerlink" title="④"></a>④</h5>
      
        <h6 id="mapper"   >
          <a href="#mapper" class="heading-link"><i class="fas fa-link"></i></a><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h6>
      <p> 方法 +sql</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where state=1 and usercode=#&#123;userCode&#125; and password=md5(#&#123;password&#125;)&quot;)</span></span><br><span class="line">    User <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="service"   >
          <a href="#service" class="heading-link"><i class="fas fa-link"></i></a><a href="#service" class="headerlink" title="service"></a>service</h6>
      <p>校验 （令牌）—— 返回统一结果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.ResultCode;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//统一返回结果  + 会话记录</span></span><br><span class="line">    </span><br><span class="line">    ResultCode&lt;User&gt; <span class="title function_">login</span><span class="params">(User user , HttpSession session)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.ResultCode;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResultCode&lt;User&gt; <span class="title function_">login</span><span class="params">(User user , HttpSession session)</span> &#123;</span><br><span class="line">        ResultCode&lt;User&gt; resultCode = <span class="keyword">new</span> <span class="title class_">ResultCode</span>&lt;&gt;();</span><br><span class="line">        user = userMapper.login(user);</span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)&#123;</span><br><span class="line">            resultCode.setCode(<span class="string">&quot;401&quot;</span>);</span><br><span class="line">            resultCode.setMessage(<span class="string">&quot;您的帐号或者密码错误！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> resultCode;</span><br><span class="line">        &#125;</span><br><span class="line">        resultCode.setCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">        resultCode.setData(user);</span><br><span class="line">        <span class="comment">//告诉页面我已经登录了</span></span><br><span class="line">        resultCode.setMessage(session.getId());</span><br><span class="line">        <span class="comment">//将令牌保存到服务器中去</span></span><br><span class="line">        session.getServletContext().setAttribute(session.getId(),user);</span><br><span class="line">        <span class="keyword">return</span> resultCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="controller"   >
          <a href="#controller" class="heading-link"><i class="fas fa-link"></i></a><a href="#controller" class="headerlink" title="controller"></a>controller</h6>
      <p>接收请求，处理乱码，返回结果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * controller的作用：控制器，控制后端与前端的交互;负责接收参数调度相关业务层，封装数据 把结果返回给前端展示出来。</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(value =&quot;/login&quot; , produces = &quot;application/json; charset=utf-8&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(User user , HttpSession session)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> JSONArray.toJSONString(userService.login(user, session));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *测试拦截器</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">     <span class="meta">@GetMapping(&quot;/a&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">a</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h5 id="拦截器"   >
          <a href="#拦截器" class="heading-link"><i class="fas fa-link"></i></a><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h5>
      <p>作用：没登录不给访问——需要对所有的请求进行验证 ，查看是否已登录</p>
<p>流程：</p>
<ul>
<li>实现接口：HandlerInterceptor</li>
<li>重写三个方法</li>
<li>①请求拦截<ul>
<li>接收token字符串 —— 服务器验证token是否合法</li>
</ul>
</li>
<li>②响应拦截</li>
<li>③最终拦截</li>
<li>注册（在SpringMVCConfig中注册）</li>
</ul>

        <h6 id="interceptor"   >
          <a href="#interceptor" class="heading-link"><i class="fas fa-link"></i></a><a href="#interceptor" class="headerlink" title="interceptor"></a>interceptor</h6>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.laohuiya.java.project.smbms.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*拦截器</span></span><br><span class="line"><span class="comment">* 实现接口：HandlerInterceptor</span></span><br><span class="line"><span class="comment">* 重写三个方法</span></span><br><span class="line"><span class="comment">*  ①请求拦截</span></span><br><span class="line"><span class="comment">* 接收token字符串 —— 服务器验证token是否合法</span></span><br><span class="line"><span class="comment">*  ②响应拦截</span></span><br><span class="line"><span class="comment">*  ③最终拦截</span></span><br><span class="line"><span class="comment">* 注册（在SpringMVCConfig中注册）</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.laohuiya.java.project.smbms.bean.ResultCode;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckLoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*①请求拦截</span></span><br><span class="line"><span class="comment">    * 如果决定拦截器对请求拦截处理后还要调用其他的拦截器或者是业务处理器去进行处理，则返回 true</span></span><br><span class="line"><span class="comment">    * 如果决定不需要再调用其他的组件去处理请求，则返回 false。*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入了拦截器&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="comment">// 接收token字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (token == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">ResultCode</span> <span class="variable">code</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultCode</span>();</span><br><span class="line">            code.setCode(<span class="string">&quot;402&quot;</span>);</span><br><span class="line">            code.setMessage(<span class="string">&quot;你没有登陆！&quot;</span>);</span><br><span class="line">            out.println(JSONArray.toJSON(code));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 服务器验证token是否合法</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> request.getSession().getServletContext();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">val</span> <span class="operator">=</span> application.getAttribute(token);</span><br><span class="line">        <span class="keyword">if</span> (val == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">ResultCode</span> <span class="variable">code</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultCode</span>();</span><br><span class="line">            code.setCode(<span class="string">&quot;402&quot;</span>);</span><br><span class="line">            code.setMessage(<span class="string">&quot;你没有登陆！&quot;</span>);</span><br><span class="line">            out.println(JSONArray.toJSON(code));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">ResultCode</span> <span class="variable">code</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultCode</span>();</span><br><span class="line">            code.setCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">            code.setMessage(token);</span><br><span class="line">            code.setData(val);</span><br><span class="line">            out.println(JSONArray.toJSON(code));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// true代表放行，false代表不放行</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//②响应拦截</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//③最终拦截</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>在SpringMVCConfig中注册:</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*注册拦截器</span></span><br><span class="line"><span class="comment">   * 拿到对象 —— 告诉对哪些进行拦截 对所有的请求拦截 但是对login不拦截</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">       registry.addInterceptor(loginInterceptor)</span><br><span class="line">               .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">               .excludePathPatterns(<span class="string">&quot;/user/login&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="二、前端"   >
          <a href="#二、前端" class="heading-link"><i class="fas fa-link"></i></a><a href="#二、前端" class="headerlink" title="二、前端"></a>二、前端</h3>
      
        <h5 id="①搭建一个脚手架项目"   >
          <a href="#①搭建一个脚手架项目" class="heading-link"><i class="fas fa-link"></i></a><a href="#①搭建一个脚手架项目" class="headerlink" title="①搭建一个脚手架项目"></a>①搭建一个脚手架项目</h5>
      <figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1、打开终端通过命令创建Vue脚手架项目: vue create 项目名</span><br><span class="line">(项目名不要使用中文和大写形式;在 cmd 中一定要切换到具体目录下执行 create 操作，这个项目会创建到当前目录下)</span><br><span class="line">2、进入选择界面：</span><br><span class="line">   ①Manually select features(手动选择)</span><br><span class="line">   ②Babel + Router +CSS + Linter</span><br><span class="line">   ③选vue版本：2.x</span><br><span class="line">   ④是否使用Class风格装饰器？：no</span><br><span class="line">   ⑤路由使用历史模式? ：no</span><br><span class="line">   ⑥使用什么css预编译器？：Less</span><br><span class="line">   ⑦sss校验格式(只进行报错提醒、不严谨模式、正常模式、严格模式)？：第一个</span><br><span class="line">   ⑧代码检查方式？：第一个</span><br><span class="line">   ⑨vue-cli 一般来讲是将所有的依赖目录放在 package.json 文件里。</span><br><span class="line">   ⑩是否在以后的项目中使用以上配置？：no</span><br><span class="line">3、按照步骤该启动这个项目</span><br><span class="line">    cd guanwei01</span><br><span class="line">    npm run serve </span><br><span class="line">    关闭项目只需要 ctrl + C </span><br></pre></td></tr></table></div></figure>




        <h5 id="②配置axios和element"   >
          <a href="#②配置axios和element" class="heading-link"><i class="fas fa-link"></i></a><a href="#②配置axios和element" class="headerlink" title="②配置axios和element"></a>②配置axios和element</h5>
      <p>下载 （一定要在相应目录下执行安装命令）</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i element-ui -S</span><br><span class="line">npm install axios</span><br></pre></td></tr></table></div></figure>



<p>在 main.js 中引入</p>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入ElementUI组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);<span class="comment">//设置在Vue中使用ElementUI</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/************引入axios****************/</span></span><br><span class="line"><span class="comment">//导入axios组件</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">//创建axios实例对象，并进行通用配置</span></span><br><span class="line"><span class="keyword">var</span> axiosInstance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">//设置axios进行ajax请求的基础路径</span></span><br><span class="line">  <span class="attr">baseURL</span>:<span class="string">&#x27;http://localhost:3000/&#x27;</span>,</span><br><span class="line">  <span class="comment">//设置请求头，指定请求为ajax请求</span></span><br><span class="line">  <span class="attr">headers</span>:&#123;<span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//将axios设置为Vue的原型属性</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$axios</span>=axiosInstance;</span><br></pre></td></tr></table></div></figure>




        <h5 id="③写登录"   >
          <a href="#③写登录" class="heading-link"><i class="fas fa-link"></i></a><a href="#③写登录" class="headerlink" title="③写登录"></a>③写登录</h5>
      
        <h6 id="写登录组件"   >
          <a href="#写登录组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#写登录组件" class="headerlink" title="写登录组件"></a>写登录组件</h6>
      <p>​	LoginView</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123;message&#125;&#125;&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">    帐号：&lt;input type=&quot;text&quot; v-model=&quot;userCode&quot;/&gt;&lt;br/&gt;</span><br><span class="line">    密码：&lt;input type=&quot;password&quot; v-model=&quot;userPassword&quot;/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;button @click=&quot;login&quot;&gt;登录&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;LoginView&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">       userCode: &#x27;&#x27;,</span><br><span class="line">      userPassword: &#x27;&#x27;,</span><br><span class="line">      message: &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    login() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      axios.post(&#x27;/api/user/login?userCode=&#x27; + _this.userCode + &quot;&amp;password=&quot; + _this.userPassword)</span><br><span class="line">          .then((response) =&gt; &#123;</span><br><span class="line">            let result = response.data;</span><br><span class="line">            if (result.code === &#x27;401&#x27;) &#123;</span><br><span class="line">              _this.message = result.message;</span><br><span class="line">            &#125; else if(result.code===&#x27;200&#x27;)&#123;</span><br><span class="line">              window.localStorage.setItem(&#x27;token&#x27;,result.message);</span><br><span class="line">              // 跳转</span><br><span class="line">              location.hash = &quot;#/about&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line"> span&#123;</span><br><span class="line">    color: red;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></div></figure>




        <h6 id="拦截判断"   >
          <a href="#拦截判断" class="heading-link"><i class="fas fa-link"></i></a><a href="#拦截判断" class="headerlink" title="拦截判断"></a>拦截判断</h6>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;about&quot;&gt;</span><br><span class="line">    &lt;h1&gt;This is an about page&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    axios.get(&#x27;/api/user/a&#x27;)</span><br><span class="line">    .then((response)=&gt;&#123;</span><br><span class="line">      let result = response.data;</span><br><span class="line">      console.log(result);</span><br><span class="line">      if (result.code === &#x27;402&#x27;) &#123;</span><br><span class="line">        location.hash = &quot;#/login/&quot; + result.message;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>




        <h6 id="注册路由"   >
          <a href="#注册路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#注册路由" class="headerlink" title="注册路由"></a>注册路由</h6>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import LoginView from &quot;@/components/LoginView&quot;;</span><br><span class="line"></span><br><span class="line">path: &#x27;/&#x27;,</span><br><span class="line">name: &#x27;login&#x27;,</span><br><span class="line">component: LoginView</span><br></pre></td></tr></table></div></figure>




        <h6 id="跨域问题"   >
          <a href="#跨域问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h6>
      <ol>
<li>配置 vue.config.js 文件</li>
</ol>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lintOnSave</span>: <span class="literal">false</span>,  <span class="comment">// 关闭语法检查 如果为true要求命名规范为驼峰</span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">      <span class="comment">// 后台服务器的网址，到项目名称就行 具体路径由axios请求</span></span><br><span class="line">      <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080/laohuiya_war/&#x27;</span>,</span><br><span class="line">      <span class="comment">// 是否开启本地代理 默认true</span></span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>axios 中进行跨域请求</li>
</ol>
<figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 必须以 /api开头 这样代理会被触发 guanwei/find 是具体资源名称</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/api/guanwei/find&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">      <span class="comment">// 具体的一些操作</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></div></figure>




        <h1 id="9-6"   >
          <a href="#9-6" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-6" class="headerlink" title="9-6"></a>9-6</h1>
      
        <h2 id="登录"   >
          <a href="#登录" class="heading-link"><i class="fas fa-link"></i></a><a href="#登录" class="headerlink" title="登录"></a>登录</h2>
      
        <h3 id="后端"   >
          <a href="#后端" class="heading-link"><i class="fas fa-link"></i></a><a href="#后端" class="headerlink" title="后端"></a>后端</h3>
      <p>springBoot +分步式写法+jwt</p>

        <h4 id="流程"   >
          <a href="#流程" class="heading-link"><i class="fas fa-link"></i></a><a href="#流程" class="headerlink" title="流程"></a>流程</h4>
      
        <h5 id="环境搭建👇"   >
          <a href="#环境搭建👇" class="heading-link"><i class="fas fa-link"></i></a><a href="#环境搭建👇" class="headerlink" title="环境搭建👇"></a>环境搭建👇</h5>
      
        <h6 id="①建两个子项目："   >
          <a href="#①建两个子项目：" class="heading-link"><i class="fas fa-link"></i></a><a href="#①建两个子项目：" class="headerlink" title="①建两个子项目："></a>①建两个子项目：</h6>
      <p>父项目：   ——继承spring-boot</p>
<p>​	commons(共同模块) ：对数据库的操作         ——继承spring-boot</p>
<p>​	users( 具体功能模块  )：登录、注册、增删改查              ——继承父项目、引入commons</p>

        <h6 id="②引入依赖"   >
          <a href="#②引入依赖" class="heading-link"><i class="fas fa-link"></i></a><a href="#②引入依赖" class="headerlink" title="②引入依赖"></a>②引入依赖</h6>
      <p>​	父项目：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--继承spring-boot--&gt;</span><br><span class="line">   &lt;parent&gt;</span><br><span class="line">       &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">       &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;relativePath/&gt;</span><br><span class="line">   &lt;/parent&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;dependencies&gt;</span><br><span class="line">       &lt;!--web--&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;!--redis--&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;!--jwt--&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">0.9</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;!-- jaxb依赖包 --&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;javax.activation&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;activation&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">1.1</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">   &lt;/dependencies&gt;</span><br></pre></td></tr></table></div></figure>



<p>​	commons：web+mybatis+druid+mysql+lombok+jwt+redis +jaxb</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">      &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;relativePath/&gt;</span><br><span class="line">  &lt;/parent&gt;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">      &lt;!--web--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--mybatis--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">3.5</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--druid--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">1.2</span><span class="number">.11</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!--redis--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--mysql--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">8.0</span><span class="number">.30</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!--lombok--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">1.18</span><span class="number">.24</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!--jwt--&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">0.9</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;!-- jaxb依赖包 --&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;javax.activation&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;activation&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="number">1.1</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br></pre></td></tr></table></div></figure>



<p>​	users :  继承父项目、引入commons</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">       &lt;artifactId&gt;smbms_220906&lt;/artifactId&gt;</span><br><span class="line">       &lt;groupId&gt;com.laohuiya.smbms&lt;/groupId&gt;</span><br><span class="line">       &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">   &lt;/parent&gt;</span><br><span class="line">       </span><br><span class="line">   &lt;dependencies&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;com.laohuiya.smbms.commons&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;smbms_commons&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">   &lt;/dependencies&gt;</span><br></pre></td></tr></table></div></figure>




        <h6 id="③-yml文件"   >
          <a href="#③-yml文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#③-yml文件" class="headerlink" title="③.yml文件"></a>③.yml文件</h6>
      <p>​	commons：配置数据源+关闭驼峰命名+开启日志+redis</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    password: <span class="number">1234</span></span><br><span class="line">    url: jdbc:mysql:<span class="comment">//localhost:3306/smbms</span></span><br><span class="line">    username: root</span><br><span class="line">    type: com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  redis:</span><br><span class="line">    host: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    port: <span class="number">6379</span></span><br><span class="line">    timeout: <span class="number">3000</span></span><br><span class="line">mybatis-plus:</span><br><span class="line">  configuration:</span><br><span class="line">    map-underscore-to-camel-<span class="keyword">case</span>: <span class="literal">false</span></span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></div></figure>



<p>​	users : 配置数据源+修改端口号</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: <span class="number">8011</span></span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    password: <span class="number">1234</span></span><br><span class="line">    url: jdbc:mysql:<span class="comment">//localhost:3306/smbms</span></span><br><span class="line">    username: root</span><br><span class="line">    type: com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></div></figure>



<p>具体模块实现👇</p>
<p>commons:</p>

        <h6 id="④bean包"   >
          <a href="#④bean包" class="heading-link"><i class="fas fa-link"></i></a><a href="#④bean包" class="headerlink" title="④bean包"></a>④bean包</h6>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> laohuiya</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@TableName</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Users</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主键ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@TableId</span>(value = &quot;id&quot;,type = IdType.AUTO) 设置默认自增</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;,type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户编码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String usercode;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户昵称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 性别</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@TableField</span>(exist = false) 性别查不出来 表示不参与</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String usersex;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 出生日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 手机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户角色（取自角色表-角色id）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer roleid;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 状态</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@TableLogic</span>(value = &quot;1&quot;,delval = &quot;0&quot;)  删除之后时零</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic(value = &quot;1&quot;,delval = &quot;0&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer state;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 动态级联的实现</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer userRoleId;</span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="⑤config包"   >
          <a href="#⑤config包" class="heading-link"><i class="fas fa-link"></i></a><a href="#⑤config包" class="headerlink" title="⑤config包"></a>⑤config包</h6>
      <p>​	JWT ——加盐 （不能存密码）</p>
<p>​	<strong>jwt工具类</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.laohuiya.smbms.commons.bean.Users;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jws;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtConfig</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//常量</span></span><br><span class="line">    <span class="comment">//※token过期时间</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">EXPIRE</span> <span class="operator">=</span> <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//※秘钥，加盐</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">APP_SECRET</span> <span class="operator">=</span> <span class="string">&quot;1234&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//	@param id 当前用户ID</span></span><br><span class="line">    <span class="comment">//	@param issuer 该JWT的签发者，是否使用是可选的</span></span><br><span class="line">    <span class="comment">//	@param subject 该JWT所面向的用户，是否使用是可选的</span></span><br><span class="line">    <span class="comment">//	@param ttlMillis 什么时候过期，这里是一个Unix时间戳，是否使用是可选的</span></span><br><span class="line">    <span class="comment">//	@param audience 接收该JWT的一方，是否使用是可选的</span></span><br><span class="line">    <span class="comment">//生成token字符串的方法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJwtToken</span><span class="params">(Users user)</span> &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="type">String</span> <span class="variable">JwtToken</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">                <span class="comment">//※头部信息</span></span><br><span class="line">                .setHeaderParam(<span class="string">&quot;typ&quot;</span>, <span class="string">&quot;JWT&quot;</span>)</span><br><span class="line">                <span class="comment">//※头部信息</span></span><br><span class="line">                .setHeaderParam(<span class="string">&quot;alg&quot;</span>, <span class="string">&quot;HS256&quot;</span>)</span><br><span class="line">                <span class="comment">//下面这部分是payload部分</span></span><br><span class="line">                <span class="comment">// 设置默认标签</span></span><br><span class="line">                <span class="comment">//设置jwt所面向的用户</span></span><br><span class="line">                .setSubject(<span class="string">&quot;laohuiya&quot;</span>)</span><br><span class="line">                <span class="comment">//设置签证生效的时间</span></span><br><span class="line">                .setIssuedAt(<span class="keyword">new</span> <span class="title class_">Date</span>())</span><br><span class="line">                <span class="comment">//设置签证失效的时间</span></span><br><span class="line">                .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis() + EXPIRE))</span><br><span class="line">                <span class="comment">//自定义的信息，这里存储id和姓名信息</span></span><br><span class="line">                <span class="comment">//※设置token主体部分 ，存储用户信息</span></span><br><span class="line">                .claim(<span class="string">&quot;id&quot;</span>, user.getId())</span><br><span class="line">                .claim(<span class="string">&quot;name&quot;</span>, user.getNickname())</span><br><span class="line">                <span class="comment">//下面是第三部分</span></span><br><span class="line">                .signWith(SignatureAlgorithm.HS256, APP_SECRET)</span><br><span class="line">                .compact();</span><br><span class="line">        <span class="comment">// 生成的字符串就是jwt信息，这个通常要返回出去</span></span><br><span class="line">        <span class="keyword">return</span> JwtToken;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断token是否存在与有效</span></span><br><span class="line"><span class="comment">     * 直接判断字符串形式的jwt字符串</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwtToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkToken</span><span class="params">(String jwtToken)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断token是否存在与有效</span></span><br><span class="line"><span class="comment">     * 因为通常jwt都是在请求头中携带，此方法传入的参数是请求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkToken</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//※注意名字必须为token才能获取到jwt</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">jwtToken</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据token字符串获取会员id</span></span><br><span class="line"><span class="comment">     * 这个方法也直接从http的请求中获取id的</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getMemberIdByJwtToken</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwtToken</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Jws&lt;Claims&gt; claimsJws = Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> claimsJws.getBody();</span><br><span class="line">        <span class="keyword">return</span> (String) claims.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析JWT</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwt</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String jwt)</span> &#123;</span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwt).getBody();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>​	<strong>统一返回结果工具类</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *返回结果工具类</span></span><br><span class="line"><span class="comment"> * 状态码返回</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> laohuiya</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 返回码定义</span></span><br><span class="line"><span class="comment"> * 规定:</span></span><br><span class="line"><span class="comment"> * #1表示成功</span></span><br><span class="line"><span class="comment"> * #1001～1999 区间表示参数错误</span></span><br><span class="line"><span class="comment"> * #2001～2999 区间表示用户错误</span></span><br><span class="line"><span class="comment"> * #3001～3999 区间表示接口异常</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Create in 2022/06/21 19:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ResultCode</span> &#123;</span><br><span class="line">    <span class="comment">/* 成功 */</span></span><br><span class="line">    SUCCESS(<span class="number">200</span>, <span class="string">&quot;成功&quot;</span>),</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* 默认失败 */</span></span><br><span class="line">    COMMON_FAIL(<span class="number">999</span>, <span class="string">&quot;失败&quot;</span>),</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* 参数错误：1000～1999 */</span></span><br><span class="line">    PARAM_NOT_VALID(<span class="number">1001</span>, <span class="string">&quot;参数无效&quot;</span>),</span><br><span class="line">    PARAM_IS_BLANK(<span class="number">1002</span>, <span class="string">&quot;参数为空&quot;</span>),</span><br><span class="line">    PARAM_TYPE_ERROR(<span class="number">1003</span>, <span class="string">&quot;参数类型错误&quot;</span>),</span><br><span class="line">    PARAM_NOT_COMPLETE(<span class="number">1004</span>, <span class="string">&quot;参数缺失&quot;</span>),</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* 用户错误 */</span></span><br><span class="line">    USER_NOT_LOGIN(<span class="number">2001</span>, <span class="string">&quot;用户未登录&quot;</span>),</span><br><span class="line">    USER_ACCOUNT_EXPIRED(<span class="number">2002</span>, <span class="string">&quot;账号已过期&quot;</span>),</span><br><span class="line">    USER_CREDENTIALS_ERROR(<span class="number">2003</span>, <span class="string">&quot;密码错误&quot;</span>),</span><br><span class="line">    USER_CREDENTIALS_EXPIRED(<span class="number">2004</span>, <span class="string">&quot;密码过期&quot;</span>),</span><br><span class="line">    USER_ACCOUNT_DISABLE(<span class="number">2005</span>, <span class="string">&quot;账号不可用&quot;</span>),</span><br><span class="line">    USER_ACCOUNT_LOCKED(<span class="number">2006</span>, <span class="string">&quot;账号被锁定&quot;</span>),</span><br><span class="line">    USER_ACCOUNT_NOT_EXIST(<span class="number">2007</span>, <span class="string">&quot;账号不存在&quot;</span>),</span><br><span class="line">    USER_ACCOUNT_ALREADY_EXIST(<span class="number">2008</span>, <span class="string">&quot;账号已存在&quot;</span>),</span><br><span class="line">    USER_ACCOUNT_USE_BY_OTHERS(<span class="number">2009</span>, <span class="string">&quot;账号下线&quot;</span>),</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* 业务错误 */</span></span><br><span class="line">    NO_PERMISSION(<span class="number">3001</span>, <span class="string">&quot;没有权限&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"> </span><br><span class="line">    ResultCode(Integer code, String message) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据code获取message</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getMessageByCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (ResultCode ele : values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ele.getCode().equals(code)) &#123;</span><br><span class="line">                <span class="keyword">return</span> ele.getMessage();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>​	<strong>返回体构造工具</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: laohuiya</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 返回体构造工具</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Create in 2022/06/21 19:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultTool</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JsonResult <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; JsonResult&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="literal">true</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JsonResult <span class="title function_">fail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JsonResult <span class="title function_">fail</span><span class="params">(ResultCode resultEnum)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="literal">false</span>, resultEnum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>​	<strong>统一返回实体</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonResult</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Boolean success;</span><br><span class="line">    <span class="keyword">private</span> Integer errorCode;</span><br><span class="line">    <span class="keyword">private</span> String errorMsg;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">(<span class="type">boolean</span> success)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.success = success;</span><br><span class="line">        <span class="built_in">this</span>.errorCode = success ? ResultCode.SUCCESS.getCode() : ResultCode.COMMON_FAIL.getCode();</span><br><span class="line">        <span class="built_in">this</span>.errorMsg = success ? ResultCode.SUCCESS.getMessage() : ResultCode.COMMON_FAIL.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">(<span class="type">boolean</span> success, ResultCode resultEnum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.success = success;</span><br><span class="line">        <span class="built_in">this</span>.errorCode = success ? ResultCode.SUCCESS.getCode() : (resultEnum == <span class="literal">null</span> ? ResultCode.COMMON_FAIL.getCode() : resultEnum.getCode());</span><br><span class="line">        <span class="built_in">this</span>.errorMsg = success ? ResultCode.SUCCESS.getMessage() : (resultEnum == <span class="literal">null</span> ? ResultCode.COMMON_FAIL.getMessage() : resultEnum.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">(<span class="type">boolean</span> success, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.success = success;</span><br><span class="line">        <span class="built_in">this</span>.errorCode = success ? ResultCode.SUCCESS.getCode() : ResultCode.COMMON_FAIL.getCode();</span><br><span class="line">        <span class="built_in">this</span>.errorMsg = success ? ResultCode.SUCCESS.getMessage() : ResultCode.COMMON_FAIL.getMessage();</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">(<span class="type">boolean</span> success, ResultCode resultEnum, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.success = success;</span><br><span class="line">        <span class="built_in">this</span>.errorCode = success ? ResultCode.SUCCESS.getCode() : (resultEnum == <span class="literal">null</span> ? ResultCode.COMMON_FAIL.getCode() : resultEnum.getCode());</span><br><span class="line">        <span class="built_in">this</span>.errorMsg = success ? ResultCode.SUCCESS.getMessage() : (resultEnum == <span class="literal">null</span> ? ResultCode.COMMON_FAIL.getMessage() : resultEnum.getMessage());</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="⑥mapper包"   >
          <a href="#⑥mapper包" class="heading-link"><i class="fas fa-link"></i></a><a href="#⑥mapper包" class="headerlink" title="⑥mapper包"></a>⑥mapper包</h6>
      <p>​	（全查询）</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UsersMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select id,userCode,nickName,userSex,birthday,phone,roleId,state,floor(datediff(now(),birthday)/365) as userAge from user where state=1 and userCode=#&#123;usercode&#125; and password=md5(#&#123;password&#125;)&quot;)</span></span><br><span class="line">    Users <span class="title function_">login</span><span class="params">(Users user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="⑦service包"   >
          <a href="#⑦service包" class="heading-link"><i class="fas fa-link"></i></a><a href="#⑦service包" class="headerlink" title="⑦service包"></a>⑦service包</h6>
      <p>​	1、实现类、重写方法   </p>
<p>​	2、判断user是否为null</p>
<p>​	3、设置密码为空 避免返回密码</p>
<p>​	4、处理性别返回格式问题 (也可以在sql中处理这个问题)</p>
<p>​	5、将token存入Redis 并返回 (产生一个jwt字符串，将jwt存入Resdis)</p>
<p>​	6、统一返回结果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UsersService</span> &#123;</span><br><span class="line"></span><br><span class="line">    JsonResult&lt;String&gt; <span class="title function_">login</span><span class="params">(Users user)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsersServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UsersService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UsersMapper usersMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String,String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult&lt;String&gt; <span class="title function_">login</span><span class="params">(Users user)</span> &#123;</span><br><span class="line">        user = usersMapper.login(user);</span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ResultTool.fail(ResultCode.USER_CREDENTIALS_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置密码为空 避免返回密码</span></span><br><span class="line">        user.setPassword(<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//处理性别问题 为1设置为女 ；0则设置为男</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">usersex</span> <span class="operator">=</span> user.getUsersex();</span><br><span class="line">        <span class="keyword">if</span>(usersex==<span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">            user.setUsersex(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            user.setUsersex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * JWT</span></span><br><span class="line"><span class="comment">        * 登录成功后 需要保存token到Redis中，把token返回给前端</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="comment">//第一步：生成jwt字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtConfig.getJwtToken(user);</span><br><span class="line">        <span class="comment">//需要将jwt存放到Redis</span></span><br><span class="line">        <span class="comment">//自定义序列化</span></span><br><span class="line">        <span class="type">StringRedisSerializer</span> <span class="variable">serializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">        redisTemplate.setValueSerializer(serializer);</span><br><span class="line">        ValueOperations&lt;String, String&gt; value = redisTemplate.opsForValue();</span><br><span class="line">        value.set(<span class="string">&quot;token:&quot;</span>+user.getId(),jwt, JwtConfig.EXPIRE);</span><br><span class="line">        <span class="keyword">return</span> ResultTool.success(jwt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>users :</p>

        <h6 id="⑧启动项UserApplication"   >
          <a href="#⑧启动项UserApplication" class="heading-link"><i class="fas fa-link"></i></a><a href="#⑧启动项UserApplication" class="headerlink" title="⑧启动项UserApplication"></a>⑧启动项UserApplication</h6>
      <p>​		@SpringBootApplication</p>
<p>​		@MapperScan  &#x2F;&#x2F;扫mapper、service、controller包</p>
<p>​		main方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.laohuiya.smbms.commons.mapper&quot;)</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.laohuiya.smbms.commons.service&quot;,&quot;com.laohuiya.smbms.users.controller&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsersApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(UsersApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h6 id="⑨controller包"   >
          <a href="#⑨controller包" class="heading-link"><i class="fas fa-link"></i></a><a href="#⑨controller包" class="headerlink" title="⑨controller包"></a>⑨controller包</h6>
      <p>​	接收请求&#x2F;返回结果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsersController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UsersService usersService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult&lt;String&gt; <span class="title function_">login</span><span class="params">(Users user)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersService.login(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 测试：前端发送请求 检查token是否有效*/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/a&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult&lt;String&gt; <span class="title function_">a</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">//判断token是否存在与有效</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> JwtConfig.checkToken(request);</span><br><span class="line">        <span class="keyword">if</span> (!b)&#123;</span><br><span class="line">            <span class="keyword">return</span> ResultTool.fail(ResultCode.USER_NOT_LOGIN);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ResultTool.success(<span class="string">&quot;欢迎登录！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h1 id="9-7"   >
          <a href="#9-7" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-7" class="headerlink" title="9-7"></a>9-7</h1>
      
        <h2 id="核心问题（面试）"   >
          <a href="#核心问题（面试）" class="heading-link"><i class="fas fa-link"></i></a><a href="#核心问题（面试）" class="headerlink" title="核心问题（面试）"></a>核心问题（面试）</h2>
      <p>避免项目之间继承出现的maven包冲突问题</p>
<p>​	——解决：通过父类统一控制依赖版本 （<dependenceManagement>）可避免maven包冲突问题</p>
<p>例如如下的修改结果：</p>
<p>​	父项目：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!--继承spring-boot--&gt;</span><br><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">    &lt;relativePath/&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">&lt;properties&gt;</span><br><span class="line">    &lt;maven.compiler.source&gt;<span class="number">17</span>&lt;/maven.compiler.source&gt;</span><br><span class="line">    &lt;maven.compiler.target&gt;<span class="number">17</span>&lt;/maven.compiler.target&gt;</span><br><span class="line">    &lt;!--统一管理版本号--&gt;</span><br><span class="line">    &lt;spring.boot.version&gt;<span class="number">2.7</span><span class="number">.0</span>&lt;/spring.boot.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;!--web--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;spring.boot.version&#125;&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--redis--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;spring.boot.version&#125;&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--smbms_commons--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.laohuiya.smbms.commons&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;smbms_commons&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--mybatis--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">3.5</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--druid--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.2</span><span class="number">.11</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--mysql--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">8.0</span><span class="number">.30</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--lombok--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.18</span><span class="number">.24</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--jwt--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">0.9</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!-- jaxb依赖包 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;javax.activation&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;activation&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.1</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--分页插件--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.4</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!--fastjson--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">2.0</span><span class="number">.10</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></div></figure>



<p>​	commons：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;parent&gt;</span><br><span class="line">  &lt;artifactId&gt;smbms_220906&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;com.laohuiya.smbms&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;!--web--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--mybatis--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--druid--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--redis--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--mysql--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--lombok--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--jwt--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- jaxb依赖包 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;javax.activation&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;activation&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></div></figure>



<p>​	users : </p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;artifactId&gt;smbms_220906&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;com.laohuiya.smbms&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.laohuiya.smbms.commons&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;smbms_commons&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></div></figure>




        <h2 id="①分页效果"   >
          <a href="#①分页效果" class="heading-link"><i class="fas fa-link"></i></a><a href="#①分页效果" class="headerlink" title="①分页效果"></a>①分页效果</h2>
      <p>​	引入pagehelper依赖</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></div></figure>



<p>​	mapper包 ：sql+分页查询方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   * 分页查询*/</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Select(&quot;select u.id,userCode,nickName,userSex,if(userSex=1,&#x27;女&#x27;,&#x27;男&#x27;) as &#x27;gender&#x27;,birthday,phone,roleid,state,floor(datediff(now(),birthday)/365) as userAge,r.id as &#x27;userRoleId&#x27;,r.roleName from user u left join role r on r.id = u.roleId where state=1&quot;)</span></span><br><span class="line">   List&lt;Users&gt; <span class="title function_">findAllUser</span><span class="params">()</span>;</span><br></pre></td></tr></table></div></figure>



<p>​	service包：接口+实现类 （统一返回结果）</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 分页查询</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> page 页码</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 返回分页结果</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   JsonResult&lt;PageInfo&lt;Users&gt;&gt; <span class="title function_">findAllUser</span><span class="params">(<span class="type">int</span> page)</span>;</span><br></pre></td></tr></table></div></figure>

<p>​						</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 	@Cacheable(cacheNames = &quot;findAllUser&quot;,key = &quot;#page&quot;) 作用：将查询的数据存到Redis中</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Cacheable(cacheNames = &quot;findAllUser&quot;,key = &quot;#page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult&lt;PageInfo&lt;Users&gt;&gt; <span class="title function_">findAllUser</span><span class="params">(<span class="type">int</span> page)</span> &#123;</span><br><span class="line">        PageHelper.startPage(page,<span class="number">5</span>);</span><br><span class="line">        List&lt;Users&gt; list = usersMapper.findAllUser();</span><br><span class="line">        PageInfo&lt;Users&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(list);</span><br><span class="line">        <span class="keyword">return</span> ResultTool.success(pageInfo);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<p>​	</p>
<p>​	controller包：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/find&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> JsonResult&lt;PageInfo&lt;Users&gt;&gt; <span class="title function_">find</span><span class="params">(<span class="meta">@RequestParam(value = &quot;page&quot;,defaultValue = &quot;1&quot;)</span> <span class="type">int</span> page)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> usersService.findAllUser(page);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></div></figure>



<p>引入其他子项目的yml文件</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    #引入其他的yml文件  application-commons.yml</span><br><span class="line">    active: commons</span><br></pre></td></tr></table></div></figure>




        <h2 id="②动态级联"   >
          <a href="#②动态级联" class="heading-link"><i class="fas fa-link"></i></a><a href="#②动态级联" class="headerlink" title="②动态级联"></a>②动态级联</h2>
      <p>（xml的方式，需要mapper.xml资源包）</p>

        <h3 id="user表与role表的关联"   >
          <a href="#user表与role表的关联" class="heading-link"><i class="fas fa-link"></i></a><a href="#user表与role表的关联" class="headerlink" title="user表与role表的关联"></a>user表与role表的关联</h3>
      
        <h4 id="bean包"   >
          <a href="#bean包" class="heading-link"><i class="fas fa-link"></i></a><a href="#bean包" class="headerlink" title="bean包"></a>bean包</h4>
      <p>role</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;role&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Role</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>user</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 动态级联的实现</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@TableField(exist = false)</span></span><br><span class="line">   <span class="keyword">private</span> Integer userRoleId;</span><br><span class="line">   <span class="meta">@TableField(exist = false)</span></span><br><span class="line">   <span class="keyword">private</span> String roleName;</span><br></pre></td></tr></table></div></figure>




        <h4 id="mapper包"   >
          <a href="#mapper包" class="heading-link"><i class="fas fa-link"></i></a><a href="#mapper包" class="headerlink" title="mapper包"></a>mapper包</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 动态级联的实现（xml的方式）：通过角色名+用户姓名查找</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> name  用户名</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> roleId 角色名</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 查询结果集</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   List&lt;Users&gt; <span class="title function_">findUserByNameAndRoleName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;roleId&quot;)</span> Integer roleId)</span>;</span><br></pre></td></tr></table></div></figure>

<p>​		mapper.xml资源包</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=<span class="string">&quot;com.laohuiya.smbms.commons.mapper.UsersMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">&quot;findUserByNameAndRoleName&quot;</span> resultType=<span class="string">&quot;com.laohuiya.smbms.commons.bean.Users&quot;</span>&gt;</span><br><span class="line">        select u.id,userCode,nickName,userSex,<span class="keyword">if</span>(userSex=<span class="number">1</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;男&#x27;</span>) as <span class="string">&#x27;gender&#x27;</span>,birthday,phone,roleId,state,</span><br><span class="line">               floor(datediff(now(),birthday)/<span class="number">365</span>) as userAge,r.id as <span class="string">&#x27;userRoleId&#x27;</span>,r.roleName</span><br><span class="line">        from user u left join role r on r.id = u.roleId where state=<span class="number">1</span></span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">&quot;roleId!=null&quot;</span>&gt;</span><br><span class="line">            and roleId=#&#123;roleId&#125;</span><br><span class="line">        &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">&quot;name!=null&quot;</span>&gt;</span><br><span class="line">            and nickName like <span class="string">&#x27;%$&#123;name&#125;%&#x27;</span></span><br><span class="line">        &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></div></figure>

<p>​		在application-commons.yml文件中引入mapper.xml</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  configuration:</span><br><span class="line">    map-underscore-to-camel-<span class="keyword">case</span>: <span class="literal">false</span></span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="line">    #引入mapper.xml</span><br><span class="line">    mapper-locations: classpath:/mapper<span class="comment">/*.xml</span></span><br></pre></td></tr></table></div></figure>




        <h4 id="service包："   >
          <a href="#service包：" class="heading-link"><i class="fas fa-link"></i></a><a href="#service包：" class="headerlink" title="service包："></a>service包：</h4>
      <p>​		接口</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 动态级联</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> name 用户名</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> role 角色名</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> page 页码</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 统一返回结果</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   JsonResult&lt;PageInfo&lt;Users&gt;&gt; <span class="title function_">findUserByNameAndRoleName</span><span class="params">(String name, Integer role, Integer page)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>​		实现类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="meta">@Cacheable(cacheNames = &quot;findUserByNameAndRoleName&quot;, key = &quot;#name+&#x27;.&#x27;+#role+&#x27;.&#x27;+#page&quot;)</span></span><br><span class="line"> <span class="keyword">public</span> JsonResult&lt;PageInfo&lt;Users&gt;&gt; <span class="title function_">findUserByNameAndRoleName</span><span class="params">(String name, Integer role, Integer page)</span> &#123;</span><br><span class="line">     PageHelper.startPage(page, <span class="number">5</span>);</span><br><span class="line">     List&lt;Users&gt; list = usersMapper.findUserByNameAndRoleName(name, role);</span><br><span class="line">     PageInfo&lt;Users&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(list);</span><br><span class="line">     <span class="keyword">return</span> ResultTool.success(pageInfo);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></div></figure>




        <h4 id="controller包"   >
          <a href="#controller包" class="heading-link"><i class="fas fa-link"></i></a><a href="#controller包" class="headerlink" title="controller包"></a>controller包</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 动态级联</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page 页数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name 用户nic</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> role 角色</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回统一查询结果集</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/search&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult&lt;PageInfo&lt;Users&gt;&gt; <span class="title function_">find</span><span class="params">(<span class="meta">@RequestParam(name = &quot;page&quot;, defaultValue = &quot;1&quot;)</span> <span class="type">int</span> page, String name, Integer role)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> usersService.findUserByNameAndRoleName(name, role, page);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>




        <h4 id="如何实现未登录不能查询？⭐⭐"   >
          <a href="#如何实现未登录不能查询？⭐⭐" class="heading-link"><i class="fas fa-link"></i></a><a href="#如何实现未登录不能查询？⭐⭐" class="headerlink" title="如何实现未登录不能查询？⭐⭐"></a>如何实现未登录不能查询？⭐⭐</h4>
      <p>​	—拦截器 </p>
<p>​		—思路：</p>
<p>​				前端传来携带token的请求</p>
<p>​				根据token</p>
<p>​				后端先判断是否存在该用户，再判断token是否过期（Redis中是否存在）进行拦截</p>
<p>​		—拦截器的使用：</p>
<p>​				继承HandlerInterceptor</p>
<p>​				重写三个方法（请求拦截、响应拦截、最终拦截）</p>
<p>​				注册拦截器</p>
<p>interceptor包：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> laohuiya</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IskLoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//获取到前端发送请求携带的token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (token == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//乱码处理</span></span><br><span class="line">            response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            out.println(JSONArray.toJSONString(ResultTool.fail(ResultCode.USER_NOT_LOGIN)));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取到redis中的用户id 最终拿到令牌与Redis中的token比较判断是否存在</span></span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtConfig.parseJWT(token);</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> (<span class="type">int</span>) claims.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        ValueOperations&lt;String, String&gt; value = redisTemplate.opsForValue();</span><br><span class="line">        <span class="type">RedisSerializer</span> <span class="variable">stringSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">        redisTemplate.setValueSerializer(stringSerializer);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> value.get(<span class="string">&quot;token:&quot;</span> + id);</span><br><span class="line">        <span class="keyword">if</span> (result == <span class="literal">null</span>) &#123;</span><br><span class="line">            response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            out.println(JSONArray.toJSONString(ResultTool.fail(ResultCode.USER_NOT_LOGIN)));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>config包：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注册拦截器 ---指名对哪些请求拦截</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> laohuiya</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMVCConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> IskLoginInterceptor iskLoginInterceptor;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(iskLoginInterceptor)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/user/login&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h2 id="③基础增删改查"   >
          <a href="#③基础增删改查" class="heading-link"><i class="fas fa-link"></i></a><a href="#③基础增删改查" class="headerlink" title="③基础增删改查"></a>③基础增删改查</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   *  UsersMapper extends BaseMapper&lt;Users&gt; 、UsersService extends IService&lt;Users&gt;的方式写增删改</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping(&quot;/save&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Users user)</span> &#123;</span><br><span class="line">     usersService.save(user);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></div></figure>

<p>扩展：关于@GetMapping 、@PostMapping 、@PutMapping、@DeleteMapping的理解</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping--------&gt;通常对应查询操作</span><br><span class="line"></span><br><span class="line">2.@PostMapping--------&gt;通常对应新增操作</span><br><span class="line"></span><br><span class="line">3.@PutMapping------------&gt;通常对应修改操作</span><br><span class="line"></span><br><span class="line">4.@DeleteMapping---------&gt;通常对应删除操作</span><br><span class="line"></span><br><span class="line">http协议明确规定，put、get、delete请求都是具有幂等性的，而post为非幂等性的。所以一般插入新数据的时候使用post方法，更新数据库时用put方法</span><br></pre></td></tr></table></div></figure>


        <h1 id="9-15"   >
          <a href="#9-15" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-15" class="headerlink" title="9-15"></a>9-15</h1>
      <p>引入RocketMQ（消息中间件）</p>

        <h1 id="9-17"   >
          <a href="#9-17" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-17" class="headerlink" title="9-17"></a>9-17</h1>
      <p>前端模块</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">create table <span class="title function_">user</span></span><br><span class="line"><span class="params">(</span></span><br><span class="line"><span class="params">    id     <span class="type">int</span> auto_increment comment <span class="string">&#x27;用户id&#x27;</span></span></span><br><span class="line"><span class="params">        primary key,</span></span><br><span class="line"><span class="params">    username     varchar(<span class="number">256</span>)</span>                       <span class="literal">null</span> comment <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">    userAccount  <span class="title function_">varchar</span><span class="params">(<span class="number">256</span>)</span>                       <span class="literal">null</span> comment <span class="string">&#x27;用户登录账号&#x27;</span>,</span><br><span class="line">    avatarUrl    <span class="title function_">varchar</span><span class="params">(<span class="number">1024</span>)</span>                      <span class="literal">null</span> comment <span class="string">&#x27;用户头像&#x27;</span>,</span><br><span class="line">    userPassword <span class="title function_">varchar</span><span class="params">(<span class="number">512</span>)</span>                       not <span class="literal">null</span> comment <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">    gender       tinyint                            <span class="literal">null</span> comment <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">    phone        <span class="title function_">varchar</span><span class="params">(<span class="number">128</span>)</span>                       <span class="literal">null</span> comment <span class="string">&#x27;电话&#x27;</span>,</span><br><span class="line">    email        <span class="title function_">varchar</span><span class="params">(<span class="number">512</span>)</span>                       <span class="literal">null</span> comment <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">    userStatus   <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 not <span class="literal">null</span> comment <span class="string">&#x27;状态 1 - 正常&#x27;</span>,</span><br><span class="line">    createTime   datetime <span class="keyword">default</span> CURRENT_TIMESTAMP <span class="literal">null</span> comment <span class="string">&#x27;注册时间&#x27;</span>,</span><br><span class="line">    updateTime   datetime <span class="keyword">default</span> CURRENT_TIMESTAMP not <span class="literal">null</span> on update CURRENT_TIMESTAMP,</span><br><span class="line">    idDelete     tinyint  <span class="keyword">default</span> <span class="number">0</span>                 not <span class="literal">null</span> comment <span class="string">&#x27;是否删除&#x27;</span>,</span><br><span class="line">    userRole     <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 not <span class="literal">null</span> comment <span class="string">&#x27;用户角色 0-普通用户 1-系统管理员 2-销售员 3-库管员 &#x27;</span>)</span><br><span class="line">    comment <span class="string">&#x27;所有用户表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">/*1、订单表*/</span></span><br><span class="line">CREATE TABLE `order` (</span><br><span class="line">                         `id` <span class="type">int</span> NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">                         `orderCode` varchar(<span class="number">20</span>) DEFAULT NULL COMMENT <span class="string">&#x27;订单编号&#x27;</span>,</span><br><span class="line">                         `bookId` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;图书id——外键&#x27;</span>,</span><br><span class="line">                         `orderStatus` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;订单状态（1：已发货；0：未发货）&#x27;</span>,</span><br><span class="line">                         `userId` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;用户id——外键&#x27;</span>,</span><br><span class="line">                         `orderDatetime` date DEFAULT NULL COMMENT <span class="string">&#x27;下单时间&#x27;</span>,</span><br><span class="line">                         `state` <span class="type">int</span> DEFAULT <span class="number">1</span> COMMENT <span class="string">&#x27;状态&#x27;</span>,</span><br><span class="line">                         PRIMARY <span class="title function_">KEY</span> <span class="params">(`id`)</span></span><br><span class="line">) commit <span class="string">&#x27;订单表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*# 2、图书表*/</span></span><br><span class="line">CREATE TABLE `book` (</span><br><span class="line">                        `id` <span class="type">int</span> NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">                        `bookName` varchar(<span class="number">20</span>) DEFAULT NULL COMMENT <span class="string">&#x27;图书名称&#x27;</span>,</span><br><span class="line">                        `picture` varchar(<span class="number">200</span>) DEFAULT NULL COMMENT <span class="string">&#x27;图书图片&#x27;</span>,</span><br><span class="line">                        `content` varchar(<span class="number">200</span>) DEFAULT NULL COMMENT <span class="string">&#x27;图书内容简介&#x27;</span>,</span><br><span class="line">                        `bookPrice` decimal(<span class="number">20</span>,<span class="number">2</span>) DEFAULT NULL COMMENT <span class="string">&#x27;图书价格&#x27;</span>,</span><br><span class="line">                        `publisherId` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;出版社ID外键&#x27;</span>,</span><br><span class="line">                        `authorId` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;作者ID外键&#x27;</span>,</span><br><span class="line">                        PRIMARY <span class="title function_">KEY</span> <span class="params">(`id`)</span></span><br><span class="line">) comment <span class="string">&#x27;图书表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*# 3、出版社*/</span></span><br><span class="line">CREATE TABLE `publisher` (</span><br><span class="line">                            `id` <span class="type">int</span> NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">                            `publisherName` varchar(<span class="number">200</span>) DEFAULT NULL COMMENT <span class="string">&#x27;出版社名称&#x27;</span>,</span><br><span class="line">                            `publisherContact` varchar(<span class="number">20</span>)  DEFAULT NULL COMMENT <span class="string">&#x27;出版社联系人&#x27;</span>,</span><br><span class="line">                            `publisherPhone` varchar(<span class="number">20</span>) DEFAULT NULL COMMENT <span class="string">&#x27;联系电话&#x27;</span>,</span><br><span class="line">                            `publisherAddress` varchar(<span class="number">50</span>) DEFAULT NULL COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">                            `email` varchar(<span class="number">20</span>)  DEFAULT NULL COMMENT <span class="string">&#x27;传真&#x27;</span>,</span><br><span class="line">                            `state` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="number">1</span>,</span><br><span class="line">                            PRIMARY <span class="title function_">KEY</span> <span class="params">(`id`)</span></span><br><span class="line">) commit <span class="string">&#x27;出版社&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*# 4、作者*/</span></span><br><span class="line">CREATE TABLE `author` (</span><br><span class="line">                          `id` <span class="type">int</span> NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">                          `authorName` varchar(<span class="number">20</span>)   DEFAULT NULL COMMENT <span class="string">&#x27;作者姓名&#x27;</span>,</span><br><span class="line">                          `authorSex` <span class="type">char</span>(<span class="number">1</span>) DEFAULT NULL COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">                          `birthday` date DEFAULT NULL COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">                          PRIMARY <span class="title function_">KEY</span> <span class="params">(`id`)</span></span><br><span class="line">) commit <span class="string">&#x27;作者&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*#5、库存*/</span></span><br><span class="line">CREATE TABLE `stock` (</span><br><span class="line">                         `id` <span class="type">int</span> NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">                         `bookCount` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;商品数量&#x27;</span>,</span><br><span class="line">                         `creationTime` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">                         `bookId` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;图书id —— 外键&#x27;</span>,</span><br><span class="line">                         `publisherId` <span class="type">int</span> DEFAULT NULL COMMENT <span class="string">&#x27;出版社ID——外键&#x27;</span>,</span><br><span class="line">                         PRIMARY <span class="title function_">KEY</span> <span class="params">(`id`)</span></span><br><span class="line">) commit <span class="string">&#x27;库存&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*关联表*/</span></span><br><span class="line">create table <span class="title function_">relation</span><span class="params">(</span></span><br><span class="line"><span class="params">    `id` <span class="type">int</span> NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span></span><br><span class="line"><span class="params">    `stockId` <span class="type">int</span> NOT NULL  COMMENT <span class="string">&#x27;库存ID&#x27;</span>,</span></span><br><span class="line"><span class="params">    `authorId` <span class="type">int</span> NOT NULL  <span class="string">&#x27;作者ID&#x27;</span>,</span></span><br><span class="line"><span class="params">    `publisherId` <span class="type">int</span> NOT NULL  <span class="string">&#x27;出版社ID&#x27;</span>,</span></span><br><span class="line"><span class="params">    `bookId` <span class="type">int</span> NOT NULL  <span class="string">&#x27;图书ID&#x27;</span>,</span></span><br><span class="line"><span class="params">    `orderId` <span class="type">int</span> NOT NULL  <span class="string">&#x27;订单ID&#x27;</span>,</span></span><br><span class="line"><span class="params">)</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="https://www.yanggroup.cn">小宇</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="https://www.yanggroup.cn/2022/09/26/%E8%B6%85%E5%B8%82%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88smbms%EF%BC%89/">https://www.yanggroup.cn/2022/09/26/%E8%B6%85%E5%B8%82%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88smbms%EF%BC%89/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><nav class="post-paginator paginator"><div class="paginator-next"><a class="paginator-next__link" href="/2022/09/26/GIT/"><span class="paginator-prev__text">Git常用命令</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B6%85%E5%B8%82%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88smbms%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">
          超市订单管理系统（smbms）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-13%E6%9D%A5%E8%87%AA%E5%8A%B3%E5%A7%90%E7%9A%84%E8%B5%9E%E5%8A%A9"><span class="toc-number">2.</span> <span class="toc-text">
          8-13来自劳姐的赞助</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.0.1.</span> <span class="toc-text">
          1、创建前后端项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%89%8D%E7%AB%AFvue%E8%84%9A%E6%89%8B%E6%9E%B6-%E6%9C%AA%E5%AE%8C%E6%88%90"><span class="toc-number">2.0.1.1.</span> <span class="toc-text">
          1.1 前端vue脚手架 (未完成)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%90%8E%E7%AB%AFwebapp%E9%A1%B9%E7%9B%AE%EF%BC%9Aservlet-myBatis"><span class="toc-number">2.0.1.2.</span> <span class="toc-text">
          1.2 后端webapp项目：servlet+myBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-pom-xml%E4%B8%AD%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">2.0.1.2.1.</span> <span class="toc-text">
          1.2.1 pom.xml中引入依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-resources%E8%B5%84%E6%BA%90%E5%8C%85%E4%B8%AD%E5%AF%BC%E5%85%A5%E8%B5%84%E6%BA%90"><span class="toc-number">2.0.1.2.2.</span> <span class="toc-text">
          1.2.2 resources资源包中导入资源</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%9E%84%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.0.2.</span> <span class="toc-text">
          2、构建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%86%99bean%E5%8C%85"><span class="toc-number">2.0.3.</span> <span class="toc-text">
          3、写bean包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-18"><span class="toc-number">3.</span> <span class="toc-text">
          8-18</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95"><span class="toc-number">3.1.</span> <span class="toc-text">
          实现登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%90%8E%E7%AB%AF"><span class="toc-number">3.1.1.</span> <span class="toc-text">
          一、后端</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96%EF%BC%9A"><span class="toc-number">3.1.1.0.1.</span> <span class="toc-text">
          ①引入依赖：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1bean%E5%8C%85"><span class="toc-number">3.1.1.0.2.</span> <span class="toc-text">
          ②bean包</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#User"><span class="toc-number">3.1.1.0.2.1.</span> <span class="toc-text">
          User</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Resultcode"><span class="toc-number">3.1.1.0.2.2.</span> <span class="toc-text">
          Resultcode</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.1.0.3.</span> <span class="toc-text">
          ③配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#SpringConfig"><span class="toc-number">3.1.1.0.3.1.</span> <span class="toc-text">
          SpringConfig</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#SpringMVCConfig"><span class="toc-number">3.1.1.0.3.2.</span> <span class="toc-text">
          SpringMVCConfig</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#InitConfig"><span class="toc-number">3.1.1.0.3.3.</span> <span class="toc-text">
          InitConfig</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3"><span class="toc-number">3.1.1.0.4.</span> <span class="toc-text">
          ④</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#mapper"><span class="toc-number">3.1.1.0.4.1.</span> <span class="toc-text">
          mapper</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#service"><span class="toc-number">3.1.1.0.4.2.</span> <span class="toc-text">
          service</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#controller"><span class="toc-number">3.1.1.0.4.3.</span> <span class="toc-text">
          controller</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">3.1.1.0.5.</span> <span class="toc-text">
          拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#interceptor"><span class="toc-number">3.1.1.0.5.1.</span> <span class="toc-text">
          interceptor</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%89%8D%E7%AB%AF"><span class="toc-number">3.1.2.</span> <span class="toc-text">
          二、前端</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%84%9A%E6%89%8B%E6%9E%B6%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.1.2.0.1.</span> <span class="toc-text">
          ①搭建一个脚手架项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E9%85%8D%E7%BD%AEaxios%E5%92%8Celement"><span class="toc-number">3.1.2.0.2.</span> <span class="toc-text">
          ②配置axios和element</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%86%99%E7%99%BB%E5%BD%95"><span class="toc-number">3.1.2.0.3.</span> <span class="toc-text">
          ③写登录</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%99%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6"><span class="toc-number">3.1.2.0.3.1.</span> <span class="toc-text">
          写登录组件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%88%A4%E6%96%AD"><span class="toc-number">3.1.2.0.3.2.</span> <span class="toc-text">
          拦截判断</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E8%B7%AF%E7%94%B1"><span class="toc-number">3.1.2.0.3.3.</span> <span class="toc-text">
          注册路由</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.2.0.3.4.</span> <span class="toc-text">
          跨域问题</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-6"><span class="toc-number">4.</span> <span class="toc-text">
          9-6</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95"><span class="toc-number">4.1.</span> <span class="toc-text">
          登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF"><span class="toc-number">4.1.1.</span> <span class="toc-text">
          后端</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B"><span class="toc-number">4.1.1.1.</span> <span class="toc-text">
          流程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%F0%9F%91%87"><span class="toc-number">4.1.1.1.1.</span> <span class="toc-text">
          环境搭建👇</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A0%E5%BB%BA%E4%B8%A4%E4%B8%AA%E5%AD%90%E9%A1%B9%E7%9B%AE%EF%BC%9A"><span class="toc-number">4.1.1.1.1.1.</span> <span class="toc-text">
          ①建两个子项目：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A1%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">4.1.1.1.1.2.</span> <span class="toc-text">
          ②引入依赖</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A2-yml%E6%96%87%E4%BB%B6"><span class="toc-number">4.1.1.1.1.3.</span> <span class="toc-text">
          ③.yml文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A3bean%E5%8C%85"><span class="toc-number">4.1.1.1.1.4.</span> <span class="toc-text">
          ④bean包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A4config%E5%8C%85"><span class="toc-number">4.1.1.1.1.5.</span> <span class="toc-text">
          ⑤config包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A5mapper%E5%8C%85"><span class="toc-number">4.1.1.1.1.6.</span> <span class="toc-text">
          ⑥mapper包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A6service%E5%8C%85"><span class="toc-number">4.1.1.1.1.7.</span> <span class="toc-text">
          ⑦service包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A7%E5%90%AF%E5%8A%A8%E9%A1%B9UserApplication"><span class="toc-number">4.1.1.1.1.8.</span> <span class="toc-text">
          ⑧启动项UserApplication</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A8controller%E5%8C%85"><span class="toc-number">4.1.1.1.1.9.</span> <span class="toc-text">
          ⑨controller包</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-7"><span class="toc-number">5.</span> <span class="toc-text">
          9-7</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98%EF%BC%88%E9%9D%A2%E8%AF%95%EF%BC%89"><span class="toc-number">5.1.</span> <span class="toc-text">
          核心问题（面试）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%91%A0%E5%88%86%E9%A1%B5%E6%95%88%E6%9E%9C"><span class="toc-number">5.2.</span> <span class="toc-text">
          ①分页效果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%91%A1%E5%8A%A8%E6%80%81%E7%BA%A7%E8%81%94"><span class="toc-number">5.3.</span> <span class="toc-text">
          ②动态级联</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#user%E8%A1%A8%E4%B8%8Erole%E8%A1%A8%E7%9A%84%E5%85%B3%E8%81%94"><span class="toc-number">5.3.1.</span> <span class="toc-text">
          user表与role表的关联</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E5%8C%85"><span class="toc-number">5.3.1.1.</span> <span class="toc-text">
          bean包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mapper%E5%8C%85"><span class="toc-number">5.3.1.2.</span> <span class="toc-text">
          mapper包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service%E5%8C%85%EF%BC%9A"><span class="toc-number">5.3.1.3.</span> <span class="toc-text">
          service包：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller%E5%8C%85"><span class="toc-number">5.3.1.4.</span> <span class="toc-text">
          controller包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%9C%AA%E7%99%BB%E5%BD%95%E4%B8%8D%E8%83%BD%E6%9F%A5%E8%AF%A2%EF%BC%9F%E2%AD%90%E2%AD%90"><span class="toc-number">5.3.1.5.</span> <span class="toc-text">
          如何实现未登录不能查询？⭐⭐</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%91%A2%E5%9F%BA%E7%A1%80%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">5.4.</span> <span class="toc-text">
          ③基础增删改查</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-15"><span class="toc-number">6.</span> <span class="toc-text">
          9-15</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-17"><span class="toc-number">7.</span> <span class="toc-text">
          9-17</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/11_Chameleon.png" alt="avatar"></div><p class="sidebar-ov-author__text">小宇</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/Undersea-Moon" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://gitee.com/Undersea_Moon" target="_blank" rel="noopener" data-popover="social.gitee" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">G</span></a><a class="sidebar-ov-social-item" href="https://gitlab.com/Undersea-Moon" target="_blank" rel="noopener" data-popover="social.gitlab" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-gitlab"></i></span></a><a class="sidebar-ov-social-item" href="tencent://message?uin=798382184" target="_blank" rel="noopener" data-popover="social.QQ" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-qq"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">2</div><div class="sidebar-ov-state-item__name">归档</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span><a href="https://github.com/Undersea-Moon" rel="noopener" target="_blank">© 小宇</a></span></div><div>Hosted by<a href="https://github.com/Undersea-Moon/myblog" rel="noopener" target="_blank">Github</a></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.7.0"></script><script src="/js/stun-boot.js?v=2.7.0"></script><script src="/js/scroll.js?v=2.7.0"></script><script src="/js/header.js?v=2.7.0"></script><script src="/js/sidebar.js?v=2.7.0"></script></body></html>